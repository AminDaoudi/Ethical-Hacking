param (
    [string]$networkPrefix,  # Network prefix like 192.168.3
    [string]$dnsServer       # DNS server to use like 192.168.4.4
)

if (-not $networkPrefix -or -not $dnsServer) {
    Write-Host "Usage: .\dns-resolver.ps1 <network_prefix> <dns_server>"
    exit
}

1..254 | ForEach-Object {
    $ip = "$networkPrefix.$_"
    try {
        $result = Resolve-DnsName -DnsOnly $ip -Server $dnsServer -ErrorAction Stop
        $result | ForEach-Object { Write-Host "$ip $($_.NameHost)" }
    } catch {
        # Optional: You could skip printing unresolved IPs if you want to mimic the output in your image.
    }
}
